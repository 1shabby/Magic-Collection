<?xml version="1.0" encoding="UTF-8"?><record_update table="sp_widget">
    <sp_widget action="INSERT_OR_UPDATE">
        <category>custom</category>
        <client_script><![CDATA[api.controller = function($scope) {
    // card and onClose are passed as widget input variables
	var c = this;
    $scope.getCardTags = function(card) {
        if (!card || !card.flags) return "";
        var tags = [];
        if (card.flags.is_commander) tags.push("Commander");
        if (card.flags.is_maybeboard) tags.push("Maybeboard");
        if (card.flags.is_sideboard) tags.push("Sideboard");
        return tags.join(", ");
    };
};
]]></client_script>
        <controller_as>c</controller_as>
        <css/>
        <data_table>sp_instance</data_table>
        <demo_data/>
        <description/>
        <docs/>
        <field_list/>
        <has_preview>false</has_preview>
        <id>mtg-card-modal</id>
        <internal>false</internal>
        <link><![CDATA[function link(scope, element, attrs, controller) {
  
}]]></link>
        <name>MTG Card Modal</name>
        <option_schema/>
        <public>true</public>
        <roles/>
        <script><![CDATA[(function() {
  /* populate the 'data' object */
  /* e.g., data.table = $sp.getValue('table'); */

})();]]></script>
        <servicenow>false</servicenow>
        <sys_class_name>sp_widget</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2025-09-19 19:57:05</sys_created_on>
        <sys_id>f95b201ac3c032100efafbfdd4013186</sys_id>
        <sys_mod_count>1</sys_mod_count>
        <sys_name>MTG Card Modal</sys_name>
        <sys_package display_value="Magic Collection" source="x_759224_magic_c_0">c09f498f9741a1107720f0571153afe1</sys_package>
        <sys_policy/>
        <sys_scope display_value="Magic Collection">c09f498f9741a1107720f0571153afe1</sys_scope>
        <sys_update_name>sp_widget_f95b201ac3c032100efafbfdd4013186</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2025-09-19 20:07:15</sys_updated_on>
        <template><![CDATA[<div class="modal-backdrop" ng-if="card" ng-click="onClose($event)" style="position:fixed;top:0;left:0;width:100vw;height:100vh;background:rgba(0,0,0,0.7);z-index:1000;"></div>
<div class="card-modal-window" ng-if="card" style="position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:#222;color:white;z-index:1001;padding:2rem;border-radius:12px;max-width:90vw;max-height:90vh;overflow:auto;box-shadow:0 8px 32px rgba(0,0,0,0.5);">
  <button style="position:absolute;top:1rem;right:1rem;font-size:2rem;background:none;border:none;color:white;cursor:pointer;z-index:1100;" ng-click="onClose($event)">&times;</button>
  <div ng-if="card">
    <div style="display:flex;gap:2rem;align-items:flex-start;">
      <img ng-src="{{card.face_one.image}}" alt="{{card.name}}" style="width:250px;max-width:40vw;border-radius:8px;box-shadow:0 2px 8px #000;">
      <div style="flex:1;min-width:200px;">
        <h2 style="margin-top:0;">{{card.name}}</h2>
        <div><b>Type:</b> {{card.face_one.type_line}}</div>
        <div ng-if="card.face_one.oracle_text"><b>Text:</b> <span style="white-space:pre-line;">{{card.face_one.oracle_text}}</span></div>
        <div ng-if="card.face_two && card.face_two.name">
          <hr>
          <h3>{{card.face_two.name}}</h3>
          <div><b>Type:</b> {{card.face_two.type_line}}</div>
          <div ng-if="card.face_two.oracle_text"><b>Text:</b> <span style="white-space:pre-line;">{{card.face_two.oracle_text}}</span></div>
        </div>
        <div style="margin-top:1rem;">
          <b>Quantity:</b> {{card.quantity}}<br>
          <b>CMC:</b> {{card.cmc}}<br>
          <b>Price:</b> ${{card.price | number:2}}<br>
          <b>Tags:</b> {{getCardTags(card)}}
        </div>
        <div style="margin-top:1rem;" ng-if="card.legality">
          <b>Legality:</b>
          <ul>
            <li ng-repeat="(fmt, legal) in card.legality">{{fmt}}: <span ng-if="legal">Legal</span><span ng-if="!legal">Illegal</span></li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</div>]]></template>
    </sp_widget>
</record_update>
